<div class="page">
  <h2>Clientes</h2>

  <p *ngIf="errorMessage" class="erro">{{ errorMessage }}</p>

  <div class="form">
    <div class="form-row">
      <div class="form-group">
        <label>Nome *</label>
        <input [(ngModel)]="clienteForm.nome" />
      </div>
      
      <div class="form-group">
        <label>NUIT</label>
        <input [(ngModel)]="clienteForm.nuit" />
      </div>
      
      <div class="form-group">
        <label>BI</label>
        <input [(ngModel)]="clienteForm.bi" />
      </div>
    </div>

    <div class="form-row">
      <div class="form-group">
        <label>Endere√ßo</label>
        <input [(ngModel)]="clienteForm.endereco" />
      </div>
      
      <div class="form-group">
        <label>Telefone</label>
        <input [(ngModel)]="clienteForm.telefone" />
      </div>
      
      <div class="form-group">
        <label>Email</label>
        <input [(ngModel)]="clienteForm.email" />
      </div>
    </div>

    <div class="form-row">
      <div class="form-group">
        <label>Tipo de Cliente</label>
        <select [(ngModel)]="clienteForm.tipoCliente">
          <option value="PESSOA">PESSOA</option>
          <option value="EMPRESA">EMPRESA</option>
        </select>
      </div>
      
      <div class="form-group">
        <label>Renda Mensal</label>
        <input type="number" [(ngModel)]="clienteForm.rendaMensal" />
      </div>
    </div>

    <div class="actions">
      <button (click)="criarCliente()" [disabled]="loading">Criar</button>
      <button (click)="listarClientes()" [disabled]="loading">Actualizar lista</button>
    </div>
  </div>

  <p *ngIf="loading">A carregar...</p>

  <table *ngIf="clientes?.length" class="tabela">
    <thead>
      <tr>
        <th>ID</th>
        <th>Nome</th>
        <th>Telefone</th>
        <th>Email</th>
        <th>Tipo</th>
        <th>Renda</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let c of clientes">
        <td>{{ c.id }}</td>
        <td>{{ c.nome }}</td>
        <td>{{ c.telefone }}</td>
        <td>{{ c.email }}</td>
        <td>{{ c.tipoCliente }}</td>
        <td>{{ c.rendaMensal | number:'1.2-2' }}</td>
      </tr>
    </tbody>
  </table>

  <p *ngIf="!loading && (!clientes || !clientes.length)">
    Sem clientes registados.
  </p>
</div>